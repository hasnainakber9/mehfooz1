<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mehfooz | Digital Enlightenment</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;700&family=Special+Elite&family=Syne:wght@400;700;800&family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="preload" as="image" href="https://images.pexels.com/photos/110854/pexels-photo-110854.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2">

    <style>
      /*
        style.css (Refactor v4)
        Summary: Full mobile/tablet compatibility, enhanced visuals, and content updates.
        Changes: Corrected responsive layouts, replaced placeholder with video,
        updated table data and quotes, removed mission statement, improved overall polish.
      */

      /* ---
        1. ROOT VARIABLES & FONT DEFINITIONS
      --- */
      :root {
        --dark-bg: #0F172A;
        --light-text: #E2E8F0;
        --medium-text: #94A3B8;
        --card-bg: #1E293B;
        --border-color: #334155;
        --gold: #F4B860;
        --teal: #00A896;
        --white: #FFFFFF;
        
        --font-heading: 'Syne', 'Helvetica Neue', sans-serif;
        --font-body: 'Ubuntu', 'Helvetica', 'Arial', sans-serif;
        --font-serif: 'Cormorant Garamond', 'Georgia', serif;
        --font-script: 'Special Elite', cursive;

        --header-height: 72px;
      }

      /* ---
        2. GLOBAL RESET & BASE STYLES
      --- */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        scroll-behavior: smooth;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      html.lenis { height: auto; }
      .lenis.lenis-smooth { scroll-behavior: auto; }

      body {
        background-color: var(--dark-bg);
        color: var(--light-text);
        font-family: var(--font-body);
        font-size: 16px;
        line-height: 1.6;
        overflow-x: hidden;
        cursor: none;
      }

      #site-wrapper {
        transition: opacity 0.5s ease-in-out;
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      :focus-visible {
        outline: 2px solid var(--gold);
        outline-offset: 3px;
        border-radius: 4px;
      }

      .skip-link {
        position: absolute;
        top: -100px;
        left: 1rem;
        z-index: 9999;
        padding: 0.75rem 1.25rem;
        background-color: var(--gold);
        color: var(--dark-bg);
        font-family: var(--font-heading);
        font-weight: 700;
        text-decoration: none;
        border-radius: 8px;
        transition: top 0.3s ease;
      }
      .skip-link:focus { top: 1rem; }

      /* ---
        3. CUSTOM CURSOR
      --- */
      #cursor-light, #cursor-dot {
        position: fixed;
        border-radius: 50%;
        left: 0;
        top: 0;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 10000;
        transition: opacity 0.3s ease;
        opacity: 0;
      }
      #cursor-light {
        width: 800px;
        height: 800px;
        background: radial-gradient(circle, rgba(244, 184, 96, 0.07) 0%, transparent 60%);
        transition-property: transform;
        transition-duration: 0.3s;
        transition-timing-function: ease-out;
      }
      #cursor-dot {
        width: 6px;
        height: 6px;
        background-color: var(--gold);
        transition-property: transform, background-color;
        transition-duration: 0.3s;
        transition-timing-function: ease;
      }
      a:hover ~ #cursor-dot,
      button:hover ~ #cursor-dot,
      select:hover ~ #cursor-dot,
      input[type="checkbox"]:hover ~ #cursor-dot {
        transform: translate(-50%, -50%) scale(1.5);
        background-color: var(--teal);
      }
      a:hover ~ #cursor-light,
      button:hover ~ #cursor-light,
      select:hover ~ #cursor-light {
        transform: translate(-50%, -50%) scale(1.2);
      }
      
      @media (hover: none) {
        #cursor-light, #cursor-dot { display: none; }
        body { cursor: auto; }
      }
      
      @media (prefers-reduced-motion: reduce) {
        body { cursor: auto; }
        #cursor-light, #cursor-dot { display: none; }
      }
      body.reduced-motion { cursor: auto; }
      body.reduced-motion #cursor-light,
      body.reduced-motion #cursor-dot { display: none; }


      /* ---
        4. INTRO OVERLAY
      --- */
      #intro-overlay {
        position: fixed;
        inset: 0;
        z-index: 1001;
        background-color: var(--dark-bg);
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        transition: opacity 1s ease-in-out;
      }
      .intro-content { position: relative; }
      .intro-line {
        font-family: var(--font-script);
        font-size: clamp(2rem, 5vw, 3rem);
        color: var(--light-text);
        opacity: 0; /* GSAP */
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        white-space: nowrap;
      }
      .intro-btn {
        font-family: var(--font-heading);
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--gold);
        background: transparent;
        border: 2px solid var(--gold);
        border-radius: 99px;
        padding: 0.75rem 2rem;
        margin-top: 10rem;
        opacity: 0; /* GSAP */
        cursor: none;
        transition: all 0.3s ease;
      }
      .intro-btn:hover {
        background-color: var(--gold);
        color: var(--dark-bg);
      }


      /* ---
        5. SITE HEADER
      --- */
      .site-header {
        position: sticky;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 100;
        height: var(--header-height);
        padding: 0 1.5rem;
        display: flex;
        align-items: center;
        transform: translateY(-100%); /* GSAP */
        opacity: 0; /* GSAP */
        transition: background-color 0.3s ease, backdrop-filter 0.3s ease;
      }
      .site-header.is-scrolled {
        background-color: rgba(15, 23, 42, 0.7);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }
      .site-header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: 1280px;
        margin: 0 auto;
      }
      .nav-logo {
        font-family: var(--font-script);
        font-size: 2rem;
        color: var(--gold);
        text-decoration: none;
        transition: color 0.3s ease;
      }
      .nav-logo:hover { color: var(--light-text); }
      .nav-links {
        display: flex;
        align-items: center;
        gap: 1.5rem;
      }
      .nav-link {
        font-family: var(--font-heading);
        font-weight: 500;
        font-size: 1rem;
        color: var(--light-text);
        text-decoration: none;
        position: relative;
        padding: 0.25rem 0.1rem;
        transition: color 0.3s ease;
        cursor: none;
      }
      .nav-link::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--gold);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1);
      }
      .nav-link:hover { color: var(--gold); }
      .nav-link.active::after,
      .nav-link:hover::after { transform: scaleX(1); }
      .nav-link.active { color: var(--gold); }
      .mobile-nav-toggle {
        display: none;
        background: transparent;
        border: none;
        padding: 0.5rem;
        z-index: 101;
        cursor: none;
      }
      .hamburger-bar {
        display: block;
        width: 24px;
        height: 2px;
        background-color: var(--light-text);
        margin: 5px 0;
        transition: transform 0.3s ease, opacity 0.3s ease;
      }

      /* ---
        6. HERO SECTION
      --- */
      .hero-section {
        position: relative;
        height: 100vh;
        min-height: 600px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        overflow: hidden;
      }
      .hero-background-container {
        position: absolute;
        inset: 0;
        z-index: 1;
        background-color: #0a101f;
      }
      .hero-background-container::after {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(circle, transparent 50%, rgba(15, 23, 42, 0.7) 100%);
        z-index: 2;
      }
      .hero-video,
      .hero-static-fallback {
        width: 100%;
        height: 100%;
        object-fit: cover;
        position: absolute;
        inset: 0;
      }
      .hero-static-fallback { display: none; }
      .hero-video { display: block; }
      .hero-content-container {
        position: relative;
        z-index: 3;
        padding: 0 1.5rem;
      }
      .hero-content {
        max-width: 900px;
        margin: 0 auto;
      }
      #hero-headline {
        font-family: var(--font-heading);
        font-weight: 800;
        font-size: clamp(2.75rem, 6vw, 5.5rem);
        letter-spacing: -0.02em;
        line-height: 1.1;
        margin-bottom: 1.5rem;
        opacity: 0; /* GSAP */
        color: transparent;
        background: linear-gradient(90deg, var(--light-text) 50%, var(--gold) 50%);
        background-size: 200% 100%;
        background-position: 100% 0;
        -webkit-background-clip: text;
        background-clip: text;
      }
      #hero-subheadline {
        font-family: var(--font-serif);
        font-size: clamp(1.25rem, 3vw, 1.75rem);
        color: var(--light-text);
        line-height: 1.5;
        max-width: 60ch;
        margin: 0 auto;
        opacity: 0; /* GSAP */
        transform: translateY(20px);
      }

      /* ---
        7. GENERAL CONTENT & TYPOGRAPHY
      --- */
      .container {
        width: 100%;
        max-width: 1100px;
        margin-left: auto;
        margin-right: auto;
        padding-left: 1.5rem;
        padding-right: 1.5rem;
      }

      .flex { display: flex; }
      .flex-col { flex-direction: column; }
      .items-center { align-items: center; }
      .w-full { width: 100%; }
      .grid { display: grid; }
      .gap-12 { gap: 3rem; }
      .gap-x-12 { column-gap: 3rem; }
      .gap-y-16 { row-gap: 4rem; }
      .text-center { text-align: center; }
      .text-left { text-align: left; }
      .text-right { text-align: right; }
      .mx-auto { margin-left: auto; margin-right: auto; }
      .max-w-3xl { max-width: 48rem; }
      .max-w-4xl { max-width: 56rem; }
      .max-w-5xl { max-width: 64rem; }
      .space-y-8 > * + * { margin-top: 2rem; }
      .mt-6 { margin-top: 1.5rem; }
      .mb-16 { margin-bottom: 4rem; }
      .mb-20 { margin-bottom: 5rem; }
      .hidden { display: none; }
      .opacity-0 { opacity: 0; }

      @media (min-width: 768px) {
        .md\:w-1\/2 { width: 50%; }
        .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .md\:flex-row { flex-direction: row; }
      }
      @media (min-width: 1024px) {
        .lg\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .lg\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
      }

      .content-section {
        padding: 100px 0;
        position: relative;
        z-index: 2;
      }
      .content-section:nth-of-type(odd) { background-color: var(--card-bg); }
      .content-section:nth-of-type(even) { background-color: var(--dark-bg); }
      #home + .content-section { background-color: var(--dark-bg); }
      
      h1, h2, h3, h4 {
        font-family: var(--font-heading);
        font-weight: 700;
        color: var(--light-text);
        line-height: 1.2;
      }
      p {
        font-family: var(--font-body);
        font-size: 1.125rem;
        line-height: 1.7;
        color: var(--medium-text);
        max-width: 65ch;
      }
      p + p { margin-top: 1.25rem; }
      strong { color: var(--gold); font-weight: 700; }

      .section-header {
        opacity: 0; /* GSAP */
        transform: translateY(30px);
      }
      .section-title {
        font-size: clamp(2.5rem, 5vw, 3.5rem);
        font-weight: 800;
        color: var(--gold);
        margin-bottom: 1rem;
        font-family: var(--font-script);
      }
      .section-subtitle {
        font-size: clamp(1.75rem, 4vw, 2.25rem);
        font-weight: 700;
        color: var(--teal);
        margin-bottom: 1.5rem;
        font-family: var(--font-heading);
      }
      .section-body {
        font-size: 1.25rem;
        color: var(--light-text);
        max-width: 60ch;
        margin: 0 auto;
      }

      /* ---
        8. COMPONENT STYLES
      --- */
      .btn {
        display: inline-block;
        font-family: var(--font-heading);
        font-weight: 700;
        font-size: 1rem;
        padding: 0.8rem 1.75rem;
        border-radius: 99px;
        text-decoration: none;
        border: 2px solid transparent;
        cursor: none;
        transition: all 0.3s ease;
      }
      .btn-primary {
        background-color: var(--teal);
        color: var(--white);
        border-color: var(--teal);
      }
      .btn-primary:hover {
        background-color: var(--gold);
        border-color: var(--gold);
        color: var(--dark-bg);
        transform: translateY(-3px) scale(1.03);
      }
      .btn-outline {
        background-color: transparent;
        color: var(--teal);
        border-color: var(--teal);
      }
      .btn-outline:hover {
        background-color: var(--teal);
        color: var(--white);
      }
      .btn-secondary {
        background-color: var(--card-bg);
        color: var(--light-text);
        border-color: var(--border-color);
      }
      .btn-secondary:hover {
        border-color: var(--teal);
        color: var(--teal);
        transform: translateY(-3px);
      }

      .journal-image-container {
        border-radius: 1rem;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        opacity: 0; /* GSAP */
        clip-path: inset(10% 20% 10% 20%);
        aspect-ratio: 4 / 3;
      }
      .journal-image-container video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .pillar-card {
        background-color: var(--dark-bg);
        border: 1px solid var(--border-color);
        border-radius: 1rem;
        padding: 2.5rem 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        transition: all 0.4s ease;
        display: flex;
        flex-direction: column;
        height: 100%;
        opacity: 0; /* GSAP */
        transform: translateY(40px);
      }
      .pillar-card-content { flex-grow: 1; }
      .pillar-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        border-color: var(--teal);
      }
      .pillar-title {
        font-family: var(--font-heading);
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--teal);
        margin-bottom: 1rem;
      }
      .pillar-body {
        font-size: 1rem;
        color: var(--medium-text);
        line-height: 1.6;
      }

      .custom-blockquote {
        border-left: 4px solid var(--gold);
        padding-left: 1.5rem;
        opacity: 0; /* GSAP */
      }
      .custom-blockquote p {
        font-family: var(--font-serif);
        font-size: 1.5rem;
        font-style: italic;
        color: var(--light-text);
        line-height: 1.6;
      }
      .custom-blockquote cite {
        display: block;
        margin-top: 1rem;
        font-family: var(--font-body);
        font-style: normal;
        font-size: 1rem;
        color: var(--medium-text);
      }
      .custom-blockquote.text-right {
        border-left: none;
        border-right: 4px solid var(--gold);
        padding-left: 0;
        padding-right: 1.5rem;
      }

      /* Challenge Section - Network Animation */
      #network-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.2;
      }

      .vision-counter-number {
        font-family: var(--font-heading);
        font-weight: 800;
        font-size: clamp(4rem, 10vw, 6rem);
        color: var(--teal);
        line-height: 1;
      }
      .vision-title {
        font-family: var(--font-heading);
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--light-text);
        margin-top: 0.5rem;
      }
      .vision-body {
        font-size: 1rem;
        color: var(--medium-text);
        margin-top: 0.5rem;
      }

      .value-container {
        opacity: 0; /* GSAP */
        transform: translateY(40px);
      }
      .value-icon-wrapper {
        width: 64px;
        height: 64px;
        margin: 0 auto 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        transition: all 0.4s ease;
      }
      .value-icon {
        width: 2rem;
        height: 2rem;
        stroke-width: 1.5;
        color: var(--medium-text);
        transition: all 0.4s ease;
      }
      .value-title {
        font-family: var(--font-script);
        font-size: 1.75rem;
        color: var(--teal);
        margin-bottom: 0.5rem;
      }
      .value-body {
        font-size: 0.95rem;
        color: var(--medium-text);
      }
      .value-container:hover .value-icon-wrapper {
        border-color: var(--gold);
        transform: scale(1.1);
      }
      .value-container:hover .value-icon { color: var(--gold); }

      .comparison-table-wrapper {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border: 1px solid var(--border-color);
        border-radius: 1rem;
        background-color: var(--dark-bg);
        padding: 1rem;
      }
      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        min-width: 600px;
      }
      .comparison-table th,
      .comparison-table td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
      }
      .comparison-table th {
        font-family: var(--font-heading);
        color: var(--light-text);
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: .05em;
      }
      .comparison-table td {
        font-family: var(--font-body);
        color: var(--medium-text);
      }
      .comparison-table tr:last-child td { border-bottom: none; }
      .comparison-table td:first-child {
        font-weight: 700;
        color: var(--light-text);
      }
      .comparison-table .check-mark {
        color: var(--teal);
        font-size: 1.5rem;
        font-weight: bold;
        text-align: center;
      }
      .comparison-table .our-column {
        background-color: rgba(0, 168, 150, 0.05);
      }
      .comparison-table .our-column th { color: var(--teal); }

      .insight-card {
        background-color: var(--dark-bg);
        border: 1px solid var(--border-color);
        border-radius: 1rem;
        overflow: hidden;
        transition: all 0.4s ease;
        display: flex;
        flex-direction: column;
      }
      .insight-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        border-color: var(--teal);
      }
      .insight-card-img {
        height: 200px;
        width: 100%;
        object-fit: cover;
        background-color: var(--card-bg);
      }
      .insight-card-content {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
      }
      .insight-card-text { flex-grow: 1; }
      .insight-card-category {
        font-family: var(--font-heading);
        font-size: 0.8rem;
        font-weight: 700;
        color: var(--gold);
        text-transform: uppercase;
        letter-spacing: .05em;
        margin-bottom: 0.5rem;
      }
      .insight-card-title {
        font-family: var(--font-heading);
        font-size: 1.25rem;
        color: var(--light-text);
        line-height: 1.4;
        margin-bottom: 0.75rem;
      }
      .insight-card-excerpt {
        font-size: 0.95rem;
        color: var(--medium-text);
        line-height: 1.6;
        margin-bottom: 1rem;
      }
      .insight-card-link {
        font-family: var(--font-heading);
        font-weight: 700;
        color: var(--teal);
        text-decoration: none;
        display: inline-block;
        margin-top: auto;
        transition: color 0.3s;
      }
      .insight-card-link:hover { color: var(--gold); }
      
      .space-y-24 > * + * {
          margin-top: 6rem;
      }

      /* Other styles... */
      
      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-family: var(--font-heading);
        font-weight: 500;
        font-size: 0.875rem;
        color: var(--medium-text);
      }
      .form-input {
        display: block;
        width: 100%;
        padding: 0.875rem 1rem;
        background-color: var(--dark-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--light-text);
        font-family: var(--font-body);
        font-size: 1rem;
        transition: all 0.3s ease;
      }
      .form-input:focus {
        outline: none;
        border-color: var(--teal);
        box-shadow: 0 0 0 3px rgba(0, 168, 150, 0.3);
      }
      textarea.form-input {
        resize: vertical;
        min-height: 100px;
      }
      select.form-input {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%2394A3B8' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'%3E%3C/path%3E%3C/svg%3E");
        background-position: right 0.7rem center;
        background-repeat: no-repeat;
        background-size: 1.2em 1.2em;
        padding-right: 2.5rem;
      }
      .form-success-message {
        text-align: center;
        border: 1px solid var(--teal);
        border-radius: 8px;
        padding: 2rem;
        margin-top: 1.5rem;
      }
      .form-success-title {
        font-family: var(--font-script);
        font-size: 2rem;
        color: var(--teal);
      }

      .chat-widget {
        background-color: var(--dark-bg);
        border: 1px solid var(--border-color);
        border-radius: 1rem;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }
      .chat-log {
        height: 300px;
        overflow-y: auto;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        background-color: rgba(15, 23, 42, 0.5);
      }
      .chat-bubble {
        max-width: 75%;
        padding: 0.75rem 1.125rem;
        border-radius: 18px;
        line-height: 1.5;
        font-family: var(--font-body);
        font-size: 0.95rem;
      }
      .user-bubble {
        background-color: var(--teal);
        color: var(--white);
        border-bottom-right-radius: 4px;
        align-self: flex-end;
      }
      .bot-bubble {
        background-color: var(--card-bg);
        color: var(--light-text);
        border-bottom-left-radius: 4px;
        align-self: flex-start;
      }
      .chat-prompt-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        border-bottom: 1px solid var(--border-color);
      }
      .chat-prompt-btn {
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        color: var(--medium-text);
        font-family: var(--font-heading);
        font-size: 0.8rem;
        font-weight: 500;
        padding: 0.4rem 0.8rem;
        border-radius: 99px;
        cursor: none;
        transition: all 0.3s ease;
      }
      .chat-prompt-btn:hover {
        background-color: var(--teal);
        border-color: var(--teal);
        color: var(--white);
        transform: translateY(-2px);
      }
      .chat-form {
        display: flex;
        gap: 0.5rem;
        padding: 1rem;
        background-color: var(--card-bg);
      }
      .chat-form .form-input {
        flex-grow: 1;
        background-color: var(--dark-bg);
      }
      .chat-send-btn {
        flex-shrink: 0;
        padding: 0.75rem;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .chat-send-btn .w-5 {
        width: 1.25rem;
        height: 1.25rem;
      }

      .site-footer {
        padding: 3rem 1.5rem;
        border-top: 1px solid var(--border-color);
        background-color: var(--dark-bg);
        position: relative;
        z-index: 2;
      }
      .site-footer p {
        font-size: 0.9rem;
        color: var(--medium-text);
        max-width: none;
      }

      /* ---
        9. ACCESSIBILITY & MODALS
      --- */
      .accessibility-controls {
        position: fixed;
        bottom: 1.5rem;
        left: 1.5rem;
        z-index: 200;
        display: flex;
        gap: 0.5rem;
      }
      .settings-btn {
        background-color: var(--card-bg);
        color: var(--medium-text);
        border: 1px solid var(--border-color);
        border-radius: 50%;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: none;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }
      .settings-btn:hover {
        color: var(--gold);
        border-color: var(--gold);
        transform: translateY(-3px);
      }
      .settings-btn .w-5 {
        width: 1.25rem;
        height: 1.25rem;
      }

      .settings-modal, .bot-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.95);
        z-index: 1002;
        width: 100%;
        max-width: 400px;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.19, 1, 0.22, 1);
      }
      .settings-modal[hidden], .bot-modal[hidden] { display: block; }
      
      .settings-modal.is-visible, .bot-modal.is-visible {
        opacity: 1;
        visibility: visible;
        transform: translate(-50%, -50%) scale(1);
      }
      .modal-backdrop {
        position: fixed;
        inset: 0;
        z-index: 1001;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }
      .modal-backdrop.is-visible {
        opacity: 1;
        visibility: visible;
      }

      .settings-modal-content, .bot-modal-content {
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 1rem;
        padding: 1.5rem;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
        position: relative;
      }
      .settings-title, .bot-modal-title {
        font-family: var(--font-script);
        font-size: 1.75rem;
        color: var(--gold);
        text-align: center;
        margin-bottom: 0.5rem;
      }
      .bot-modal-title { font-size: 1.5rem; }
      
      .bot-modal-subtitle {
        text-align: center;
        font-size: 0.9rem;
        color: var(--medium-text);
        margin-bottom: 1rem;
      }

      .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
        border-bottom: 1px solid var(--border-color);
      }
      .setting-item:last-of-type { border-bottom: none; }
      .setting-label {
        font-family: var(--font-body);
        font-weight: 500;
        color: var(--light-text);
      }
      .setting-note {
        font-size: 0.8rem;
        color: var(--medium-text);
        margin-left: 0.5rem;
      }
      #settings-close-btn {
        margin-top: 1.5rem;
        width: 100%;
      }

      .toggle-switch {
        appearance: none;
        width: 40px;
        height: 22px;
        background-color: var(--border-color);
        border-radius: 99px;
        position: relative;
        cursor: none;
        transition: background-color 0.3s ease;
      }
      .toggle-switch::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 18px;
        height: 18px;
        background-color: var(--white);
        border-radius: 50%;
        transition: transform 0.3s ease;
      }
      .toggle-switch:checked { background-color: var(--teal); }
      .toggle-switch:checked::after { transform: translateX(18px); }

      .keyboard-help-overlay {
        position: fixed;
        bottom: 1.5rem;
        left: 50%;
        transform: translateX(-50%) scale(0.95);
        z-index: 200;
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 1rem;
        padding: 1rem 1.5rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.19, 1, 0.22, 1);
      }
      .keyboard-help-overlay.is-visible {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) scale(1);
      }
      .keyboard-help-title {
        font-family: var(--font-heading);
        font-weight: 700;
        color: var(--gold);
        text-align: center;
        margin-bottom: 1rem;
      }
      .keyboard-help-list {
        list-style: none;
        display: flex;
        gap: 1.5rem;
      }
      .keyboard-help-list li {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        color: var(--medium-text);
      }
      .keyboard-help-list kbd {
        font-family: monospace;
        background-color: var(--dark-bg);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 0.1rem 0.4rem;
        font-size: 0.9rem;
        color: var(--light-text);
      }

      .bot-modal { max-width: 500px; }
      .modal-close-btn {
        position: absolute;
        top: 0.75rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 1.75rem;
        color: var(--medium-text);
        cursor: none;
        transition: color 0.3s ease;
      }
      .modal-close-btn:hover { color: var(--light-text); }
      .modal-chat-log { height: 350px; }
      .modal-pills {
        padding-bottom: 1rem;
        border-bottom: none;
      }


      /* ---
        10. REDUCED MOTION & RESPONSIVE
      --- */
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
        body { cursor: auto; }
        #cursor-light, #cursor-dot { display: none; }
        html.lenis { height: initial; }
        .lenis.lenis-smooth { scroll-behavior: auto; }
        #hero-video { display: none !important; }
        #hero-static-fallback { display: block !important; }
        .reveal-up, .journal-image-container, #hero-headline, #hero-subheadline {
          opacity: 1 !important;
          transform: translateY(0) !important;
          clip-path: none !important;
        }
      }

      body.reduced-motion {
        html.lenis { height: initial; }
        .lenis.lenis-smooth { scroll-behavior: auto; }
        #hero-video { display: none !important; }
        #hero-static-fallback { display: block !important; }
        .gsap-reveal-active {
          opacity: 1 !important;
          transform: translateY(0) !important;
        }
      }

      @media (max-width: 768px) {
        body { font-size: 15px; }
        .content-section { padding: 80px 0; }
        #hero-headline { font-size: 2.5rem; }
        #hero-subheadline { font-size: 1.125rem; }

        .nav-links {
          position: fixed;
          inset: 0;
          z-index: 100;
          background-color: var(--dark-bg);
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 2rem;
          opacity: 0;
          visibility: hidden;
          transform: translateY(-20px);
          transition: all 0.3s ease;
        }
        .nav-links.is-visible {
          opacity: 1;
          visibility: visible;
          transform: translateY(0);
        }
        .nav-link { font-size: 1.5rem; }
        .mobile-nav-toggle { display: block; }
        .mobile-nav-toggle[aria-expanded="true"] .hamburger-bar:nth-child(1) { transform: translateY(7px) rotate(45deg); }
        .mobile-nav-toggle[aria-expanded="true"] .hamburger-bar:nth-child(2) { opacity: 0; }
        .mobile-nav-toggle[aria-expanded="true"] .hamburger-bar:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

        .custom-blockquote, .custom-blockquote.text-right {
          text-align: left;
          border-right: none;
          border-left: 4px solid var(--gold);
          padding-right: 0;
          padding-left: 1.5rem;
        }
        .custom-blockquote p { font-size: 1.25rem; }

        .accessibility-controls { bottom: 1rem; left: 1rem; }
        .keyboard-help-overlay {
          bottom: 1rem;
          left: 1rem;
          right: 1rem;
          width: auto;
          transform: translateX(0) scale(0.95);
        }
        .keyboard-help-overlay.is-visible { transform: translateX(0) scale(1); }
        .keyboard-help-list { flex-direction: column; gap: 0.75rem; }
        .settings-modal { max-width: calc(100vw - 2rem); }
      }
    </style>

</head>
<body class="antialiased">
    <div id="cursor-dot"></div>
    <div id="cursor-light"></div>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div id="intro-overlay">
        <div class="intro-content">
            <h2 id="intro-line-1" class="intro-line">A quiet moment.</h2>
            <h2 id="intro-line-2" class="intro-line">Are you ready to listen?</h2>
            <button id="intro-begin-btn" class="intro-btn">Begin</button>
        </div>
    </div>

    <div id="site-wrapper" class="opacity-0">

        <header id="site-header" class="site-header">
            <nav class="container" aria-label="Main navigation">
                <div class="header-left">
                    <a href="#home" class="nav-logo">Mehfooz</a>
                </div>
                <div class="header-right">
                    <div class="nav-links" id="nav-links">
                        <a href="#challenge" class="nav-link">The Calling</a>
                        <a href="#story" class="nav-link">Our Story</a>
                        <a href="#approach" class="nav-link">Approach</a>
                        <a href="#difference" class="nav-link">Difference</a>
                        <a href="#community" class="nav-link">Community</a>
                        <a href="#insights" class="nav-link">Insights</a>
                        <a href="#vision" class="nav-link">Vision</a>
                        <a href="#connect" class="nav-link btn btn-outline">Join Us</a>
                    </div>
                    <button class="mobile-nav-toggle" id="mobile-nav-toggle" aria-controls="nav-links" aria-expanded="false">
                        <span class="sr-only">Menu</span>
                        <span class="hamburger-bar"></span>
                        <span class="hamburger-bar"></span>
                        <span class="hamburger-bar"></span>
                    </button>
                </div>
            </nav>
        </header>

        <main id="main-content">

            <section id="home" class="hero-section">
                <div class="hero-background-container">
                    <video
                        id="hero-video"
                        class="hero-video"
                        src="https://videos.pexels.com/video-files/4784099/4784099-hd_1920_1080_25fps.mp4"
                        autoplay
                        muted
                        loop
                        playsinline
                        preload="auto">
                    </video>
                    <img
                        id="hero-static-fallback"
                        class="hero-static-fallback"
                        src="https://images.pexels.com/photos/110854/pexels-photo-110854.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
                        alt="A cosmic nebula representing digital enlightenment."
                        loading="eager">
                </div>
                <div class="hero-content-container container">
                    <div class="hero-content">
                        <h1 id="hero-headline">Clarity in the Digital Crossroads.</h1>
                        <p id="hero-subheadline">Empowering the communities of Gilgit Baltistan with the tools to navigate the digital world safely and confidently.</p>
                    </div>
                </div>
            </section>

            <section id="challenge" class="content-section">
                <canvas id="network-canvas"></canvas>
                <div class="container mx-auto max-w-4xl text-center">
                     <div class="section-header reveal-up">
                        <h2 class="section-title">The Challenge & The Calling</h2>
                        <h3 class="section-subtitle">Where Progress Meets Peril</h3>
                        <p class="section-body">In Gilgit Baltistan, rapid technological adoption is outpacing digital literacy. This creates a critical gap, leaving communities vulnerable to tech-enabled misinformation, inadequate online safety practices, and digital exclusion. We exist to bridge this gap.</p>
                    </div>
                </div>
            </section>

            <section id="story" class="content-section">
                <div class="container mx-auto max-w-4xl">
                    <div class="flex flex-col md:flex-row gap-12 items-center">
                        <div class="w-full md:w-1/2">
                            <div class="journal-image-container reveal-up">
                               <video
                                    src="https://videos.pexels.com/video-files/8051785/8051785-hd_1920_1080_25fps.mp4"
                                    autoplay
                                    muted
                                    loop
                                    playsinline
                                    preload="auto">
                                </video>
                            </div>
                        </div>
                        <div class="w-full md:w-1/2">
                            <h2 class="section-title reveal-up">From Our Journal</h2>
                            <p class="section-body text-left reveal-up">Mehfooz began not with a line of code, but with a conversation. In a small <strong>Skardu</strong> teahouse, over cups of warm chai, we listened.</p>
                            <p class="section-body text-left reveal-up">We heard stories of connection and confusion, of hope and fear in a new digital world. We learned that the need wasn't for more technology, but for more understanding. For a bridge between timeless wisdom and modern tools. Mehfooz is our promise to help build that bridge, together.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="approach" class="content-section">
                <div class="container mx-auto max-w-5xl">
                    <div class="text-center mb-20 section-header reveal-up">
                        <h2 class="section-title">An Ecosystem of Empowerment</h2>
                        <p class="section-body">Our solution is a unique, three-pronged approach that integrates culture, technology, and community to create a sustainable cycle of learning and trust.</p>
                    </div>
                    <div class="grid md:grid-cols-3 gap-12 text-center">
                        <div class="pillar-card reveal-up">
                            <div class="pillar-card-content">
                               <h3 class="pillar-title">Wisdom, Amplified</h3>
                               <p class="pillar-body">We don't just provide information; we build on existing foundations of trust by collaborating with local religious leaders (Ulema), empowering them as trusted digital literacy ambassadors within their communities.</p>
                            </div>
                        </div>
                        <div class="pillar-card reveal-up">
                            <div class="pillar-card-content">
                              <h3 class="pillar-title">Personalized Guidance. Instantly.</h3>
                              <p class="pillar-body">Harnessing AI, MehfoozBot offers personal, patient help, adapting to each user's language and learning style, making technology feel like a friend.</p>
                            </div>
                            <button id="open-bot-demo-approach" class="btn btn-secondary mt-6">See MehfoozBot in Action</button>
                        </div>
                        <div class="pillar-card reveal-up">
                            <div class="pillar-card-content">
                                <h3 class="pillar-title">Knowledge, Co-Created</h3>
                                <p class="pillar-body">Through short, localized mini-courses and a unique feedback ecosystem with local college students, we ensure our knowledge is always relevant, effective, and built with the community, for the community.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="difference" class="content-section">
                 <div class="container mx-auto max-w-5xl">
                    <div class="text-center mb-20 section-header reveal-up">
                        <h2 class="section-title">The Mehfooz Difference</h2>
                        <p class="section-body">We are committed to revolutionizing digital literacy by integrating state-of-the-art technology with deep community engagement. Here's how we set ourselves apart.</p>
                    </div>
                    <div class="comparison-table-wrapper reveal-up">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Feature / Approach</th>
                                    <th class="our-column">Mehfooz Internet</th>
                                    <th>Digital Rights Foundation</th>
                                    <th>Soch Fact Check</th>
                                    <th>Media Matters</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>AI-Powered Personalization</td>
                                    <td class="check-mark our-column">✓</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>Ulema Partnership Model</td>
                                    <td class="check-mark our-column">✓</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                 <tr>
                                    <td>Student Feedback Ecosystem</td>
                                    <td class="check-mark our-column">✓</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>Content in Indigenous Languages</td>
                                    <td class="check-mark our-column">✓</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>Singular Focus on Misinformation</td>
                                    <td class="check-mark our-column">✓</td>
                                    <td class="check-mark">✓</td>
                                    <td class="check-mark">✓</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>Multi-Platform Social Media Delivery</td>
                                    <td class="check-mark our-column">✓</td>
                                    <td class="check-mark">✓</td>
                                    <td class="check-mark">✓</td>
                                    <td class="check-mark">✓</td>
                                </tr>
                                <tr>
                                    <td>Digital Rights & Policy Advocacy</td>
                                    <td></td>
                                    <td class="check-mark">✓</td>
                                    <td></td>
                                    <td class="check-mark">✓</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                 </div>
            </section>

            <section id="community" class="content-section">
                <div class="container mx-auto max-w-4xl">
                    <div class="text-center mb-16 section-header reveal-up">
                        <h2 class="section-title">The Heart of Our Community</h2>
                        <h3 class="section-subtitle">Voices from the Valley</h3>
                    </div>
                    <div class="space-y-8">
                        <blockquote class="custom-blockquote reveal-up">
                            <p>"For the first time, I felt I could ask a 'silly' question about my phone without feeling embarrassed. Mehfooz looks promising."</p>
                            <cite>- A student from Gilgit</cite>
                        </blockquote>
                        <blockquote class="custom-blockquote text-right reveal-up">
                            <p>"They didn't come to teach; they came to learn with us. That is why we trust them."</p>
                            <cite>- An elder from <strong>Skardu</strong></cite>
                        </blockquote>
                    </div>
                </div>
            </section>

            <section id="insights" class="content-section">
                <div class="container mx-auto max-w-5xl">
                     <div class="text-center mb-20 section-header reveal-up">
                        <h2 class="section-title">Insights from the Digital Frontier</h2>
                        <p class="section-body">Explore our latest research, field notes, and data on digital literacy, misinformation, and community resilience in Gilgit Baltistan.</p>
                    </div>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-12">
                        <div class="insight-card reveal-up">
                            <img src="https://images.pexels.com/photos/669615/pexels-photo-669615.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Data charts on a screen" class="insight-card-img">
                            <div class="insight-card-content">
                                <div class="insight-card-text">
                                    <p class="insight-card-category">Report</p>
                                    <h3 class="insight-card-title">The Anatomy of a Viral Rumor in Skardu Valley</h3>
                                    <p class="insight-card-excerpt">Our deep-dive analysis tracks a single piece of misinformation from a WhatsApp group to widespread community belief, revealing critical intervention points.</p>
                                </div>
                                <a href="#" class="insight-card-link">Read More &rarr;</a>
                            </div>
                        </div>
                        <div class="insight-card reveal-up">
                            <img src="https://images.pexels.com/photos/4145190/pexels-photo-4145190.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="A person using a smartphone" class="insight-card-img">
                            <div class="insight-card-content">
                                <div class="insight-card-text">
                                    <p class="insight-card-category">Field Note</p>
                                    <h3 class="insight-card-title">"I didn't know it was fake": First Impressions of MehfoozBot</h3>
                                    <p class="insight-card-excerpt">Early user testimonials highlight the power of non-judgmental, AI-powered guidance in building digital confidence and critical thinking skills.</p>
                                </div>
                                <a href="#" class="insight-card-link">Read More &rarr;</a>
                            </div>
                        </div>
                        <div class="insight-card reveal-up">
                            <img src="https://images.pexels.com/photos/3184338/pexels-photo-3184338.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="People collaborating around a table" class="insight-card-img">
                            <div class="insight-card-content">
                                 <div class="insight-card-text">
                                    <p class="insight-card-category">Data Point</p>
                                    <h3 class="insight-card-title">Language & Trust: Why Hyper-Localization is Non-Negotiable</h3>
                                    <p class="insight-card-excerpt">Our data shows a 300% increase in engagement when content is in indigenous languages like Shina and Balti, proving the vital link between language and trust.</p>
                                </div>
                                <a href="#" class="insight-card-link">Read More &rarr;</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="vision" class="content-section">
                <div class="container mx-auto max-w-4xl text-center">
                    <div class="mb-16 section-header reveal-up">
                        <h2 class="section-title">Charting Our Future</h2>
                        <p class="section-body max-w-3xl mx-auto">Our five-year vision is to scale our impact, offering an opportunity for partners to co-create a digitally resilient future for Pakistan and beyond.</p>
                    </div>
                    <div class="grid md:grid-cols-2 gap-x-12 gap-y-16 text-left">
                        <div class="reveal-up">
                            <p class="vision-counter-number" id="user-counter">0</p>
                            <h3 class="vision-title">Empowered Users</h3>
                            <p class="vision-body">Leveraging our established educational networks and community structures for organic, sustainable growth across Pakistan.</p>
                        </div>
                        <div class="reveal-up">
                            <p class="vision-counter-number" id="platform-counter">0+</p>
                            <h3 class="vision-title">Platform Evolutions</h3>
                            <p class="vision-body">Introducing AI-driven learning paths, enhanced offline capabilities, and expanded indigenous language support.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="values" class="content-section">
                <div class="container mx-auto max-w-5xl">
                    <div class="text-center mb-20 section-header reveal-up">
                        <h2 class="section-title">Our Guiding Principles</h2>
                    </div>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-12 text-center">
                        <div class="value-container reveal-up">
                            <div class="value-icon-wrapper">
                                <svg class="value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a3.004 3.004 0 015.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                            </div>
                            <h3 class="value-title">Collaboration</h3>
                            <p class="value-body">We build partnerships with local leaders, researchers, students and community members to create a holistic approach to combating misinformation.</p>
                        </div>
                        <div class="value-container reveal-up">
                            <div class="value-icon-wrapper">
                                <svg class="value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                            <h3 class="value-title">Integrity</h3>
                            <p class="value-body">We uphold the highest standards of accuracy and reliability, ensuring users receive trustworthy information.</p>
                        </div>
                        <div class="value-container reveal-up">
                            <div class="value-icon-wrapper">
                                <svg class="value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                            </div>
                            <h3 class="value-title">Inclusivity</h3>
                            <p class="value-body">We embrace diversity by providing resources in multiple languages, ensuring everyone has access to digital literacy education.</p>
                        </div>
                        <div class="value-container reveal-up">
                            <div class="value-icon-wrapper">
                                <svg class="value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 11-7.072 0 .548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                            </div>
                            <h3 class="value-title">Innovation</h3>
                            <p class="value-body">We leverage cutting-edge technologies like AI to continuously enhance our educational offerings and user experience.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="connect" class="content-section">
                <div class="container mx-auto space-y-24">
                    <div class="text-center max-w-3xl mx-auto section-header reveal-up">
                        <h2 class="section-title">Join The Movement</h2>
                        <p class="section-body">Whether you are a community leader, a potential partner, or a researcher, there is a role for you. Let's connect and become a part of the solution together.</p>
                    </div>

                    <div class="max-w-2xl mx-auto reveal-up">
                        <h3 class="section-subtitle text-center">Chat with MehfoozBot</h3>
                        <div class="chat-widget">
                            <div id="chat-log" class="chat-log"></div>
                            <div class="chat-prompt-buttons" id="prompt-buttons">
                                </div>
                            <form id="chat-form" class="chat-form">
                                <input type="text" id="chat-input" placeholder="Ask a friendly question..." class="form-input" autocomplete="off">
                                <button type="submit" class="btn btn-primary chat-send-btn">
                                    <span class="sr-only">Send</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M3.105 3.105a.5.5 0 01.707 0L19.5 18.793a.5.5 0 01-.707.707L3.105 3.812a.5.5 0 010-.707z" /><path d="M3.105 16.895a.5.5 0 010-.707l15.687-15.687a.5.5 0 01.707.707L3.812 16.895a.5.5 0 01-.707 0z" /></svg>
                                </button>
                            </form>
                        </div>
                    </div>

                    <div class="max-w-xl mx-auto reveal-up">
                        <h3 class="section-subtitle text-center">Send a Personal Message</h3>
                        <form id="contact-form" class="space-y-6 text-left">
                            <div>
                                <label for="contact-name" class="form-label">Your Name</label>
                                <input type="text" name="name" id="contact-name" required class="form-input">
                            </div>
                            <div>
                                <label for="contact-email" class="form-label">Your Email</label>
                                <input type="email" name="email" id="contact-email" required class="form-input">
                            </div>
                            <div>
                                <label for="contact-interest" class="form-label">I am a...</label>
                                <select name="interest" id="contact-interest" class="form-input">
                                    <option>Community Member</option>
                                    <option>Potential Partner / Investor</option>
                                    <option>Researcher / Institution</option>
                                    <option>Student</option>
                                </select>
                            </div>
                            <div>
                                <label for="contact-message" class="form-label">Your Message</label>
                                <textarea name="message" id="contact-message" rows="5" required class="form-input"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary w-full">Send with heart</button>
                        </form>
                        <div id="form-success" class="form-success-message hidden">
                            <h3 class="form-success-title">Thank You!</h3>
                            <p>Your message has been received. We'll be in touch soon.</p>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <footer id="site-footer" class="site-footer">
            <div class="container mx-auto px-6 text-center">
                <p>&copy; 2025 Mehfooz. A digital sanctuary for all.</p>
            </div>
        </footer>

    </div> 
    
    <div class="accessibility-controls">
        <button id="settings-toggle-btn" class="settings-btn" aria-label="Open settings" aria-controls="settings-modal" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.26.96c-1.29-.58-2.53.48-2.26 1.9c.09.48-.1.98-.48 1.35c-1.19.95-1.19 2.7.01 3.65c.38.37.58.87.48 1.35c-.27 1.42 1.01 2.48 2.26 1.9c.48-.22.99-.22 1.47 0c1.25.58 2.53-.48 2.26-1.9c-.09-.48.1-.98.48-1.35c1.19-.95 1.19-2.7-.01-3.65c-.38-.37-.58-.87-.48-1.35c.27-1.42-1.01-2.48-2.26-1.9a1.532 1.532 0 01-2.26-.96zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>
        </button>

        <button id="help-toggle-btn" class="settings-btn" aria-label="Show keyboard shortcuts" aria-controls="keyboard-help" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.06-1.061 3.5 3.5 0 014.668 4.668l-1.06 1.06a.75.75 0 01-1.06-1.06l1.06-1.06a1.99 1.99 0 00-2.828-2.828l-1.78 1.78zM9 13a1 1 0 112 0 1 1 0 01-2 0z" clip-rule="evenodd" /></svg>
        </button>
    </div>

    <div id="settings-modal" class="settings-modal" role="dialog" aria-modal="true" aria-labelledby="settings-title" hidden>
        <div class="settings-modal-content">
            <h3 id="settings-title" class="settings-title">Settings</h3>
            <div class="setting-item">
                <label for="motion-toggle" class="setting-label">Enable Ambient Motion</label>
                <input type="checkbox" id="motion-toggle" class="toggle-switch" role="switch">
            </div>
            <div class="setting-item">
                <label for="sound-toggle" class="setting-label">Enable Ambient Sound</label>
                <input type="checkbox" id="sound-toggle" class="toggle-switch" role="switch" disabled>
                <span class="setting-note">(Ambient sound not yet implemented)</span>
            </div>
            <button id="settings-close-btn" class="btn btn-secondary" aria-label="Close settings">Close</button>
        </div>
    </div>

    <div id="keyboard-help" class="keyboard-help-overlay" role="tooltip" hidden>
        <h4 class="keyboard-help-title">Keyboard Shortcuts</h4>
        <ul class="keyboard-help-list">
            <li><kbd>H</kbd><span>Go to Home</span></li>
            <li><kbd>M</kbd><span>Open MehfoozBot</span></li>
            <li><kbd>S</kbd><span>Skip to Content</span></li>
            <li><kbd>?</kbd><span>Toggle this help</span></li>
            <li><kbd>Esc</kbd><span>Close modals</span></li>
        </ul>
    </div>


    <div id="bot-modal" class="bot-modal" role="dialog" aria-modal="true" aria-labelledby="bot-modal-title" hidden>
        <div class="bot-modal-content">
            <button id="close-bot-demo" class="modal-close-btn" aria-label="Close chat demo">&times;</button>
            <h3 id="bot-modal-title" class="bot-modal-title">Chat with MehfoozBot</h3>
            <p class="bot-modal-subtitle">A simulated demo.</p>
            <div id="modal-chat-log" class="chat-log modal-chat-log">
                </div>
            <div id="modal-question-pills" class="chat-prompt-buttons modal-pills">
                </div>
            <form id="modal-chat-form" class="chat-form">
                <input type="text" id="modal-chat-input" placeholder="Type your question..." autocomplete="off" class="form-input">
                <button type="submit" class="btn btn-primary chat-send-btn">
                    <span class="sr-only">Send</span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M3.105 3.105a.5.5 0 01.707 0L19.5 18.793a.5.5 0 01-.707.707L3.105 3.812a.5.5 0 010-.707z" /><path d="M3.105 16.895a.5.5 0 010-.707l15.687-15.687a.5.5 0 01.707.707L3.812 16.895a.5.5 0 01-.707 0z" /></svg>
                </button>
            </form>
        </div>
    </div>
    <div id="modal-backdrop" class="modal-backdrop" hidden></div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lenis@1.0.45/dist/lenis.min.js"></script>
    <script>
      // CDN Fallback Example
      if (typeof gsap === 'undefined') {
        console.warn("GSAP CDN failed to load. Animations will be disabled.");
      }
    </script>

    <script>
      /*
        script.js (Refactor v5)
        Summary: Full mobile/tablet compatibility, enhanced visuals, and content updates.
        Changes: Corrected responsive layouts, replaced placeholder with video,
        updated table data and quotes, removed mission statement, improved overall polish.
      */

      document.addEventListener('DOMContentLoaded', function() {
        'use strict';

        const selectors = {
          introOverlay: '#intro-overlay',
          introLine1: '#intro-line-1',
          introLine2: '#intro-line-2',
          introBeginBtn: '#intro-begin-btn',
          siteWrapper: '#site-wrapper',
          cursorDot: '#cursor-dot',
          cursorLight: '#cursor-light',
          siteHeader: '#site-header',
          navLinksContainer: '#nav-links',
          mobileNavToggle: '#mobile-nav-toggle',
          heroHeadline: '#hero-headline',
          heroSubheadline: '#hero-subheadline',
          heroVideo: '#hero-video',
          heroStatic: '#hero-static-fallback',
          networkCanvas: '#network-canvas',
          userCounter: '#user-counter',
          platformCounter: '#platform-counter',
          settingsToggleBtn: '#settings-toggle-btn',
          settingsModal: '#settings-modal',
          settingsCloseBtn: '#settings-close-btn',
          motionToggle: '#motion-toggle',
          helpToggleBtn: '#help-toggle-btn',
          keyboardHelp: '#keyboard-help',
          modalBackdrop: '#modal-backdrop',
          chatLog: '#chat-log',
          chatForm: '#chat-form',
          chatInput: '#chat-input',
          promptButtonsContainer: '#prompt-buttons',
          openBotBtn: '#open-bot-demo-approach',
          botModal: '#bot-modal',
          closeBotBtn: '#close-bot-demo',
          modalChatLog: '#modal-chat-log',
          modalChatForm: '#modal-chat-form',
          modalChatInput: '#modal-chat-input',
          modalPillContainer: '#modal-question-pills',
          contactForm: '#contact-form',
          formSuccess: '#form-success',
        };

        const els = {};
        for (const key in selectors) {
          els[key] = document.querySelector(selectors[key]);
        }

        if (!els.introOverlay || !els.siteWrapper || !els.siteHeader) {
          console.error("Essential elements missing.");
          return;
        }

        let lenis;
        let isSiteEntered = false;

        registerGsapPlugins();
        initCustomCursor();
        initIntroAnimation();

        function registerGsapPlugins() {
          if (typeof gsap === 'undefined') {
            console.error("GSAP is not loaded. Animations disabled.");
            document.body.classList.add('reduced-motion');
            return;
          }
          gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
        }

        function initCustomCursor() {
            if (window.matchMedia("(hover: none)").matches) {
                document.body.style.cursor = 'auto';
                return;
            }
            if (!els.cursorDot || !els.cursorLight || document.body.classList.contains('reduced-motion')) return;

            gsap.set([els.cursorDot, els.cursorLight], { opacity: 1 });

            let mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
            window.addEventListener('mousemove', e => {
                mouse.x = e.clientX;
                mouse.y = e.clientY;
            }, { passive: true });

            gsap.ticker.add(() => {
                gsap.to(els.cursorDot, { duration: 0.2, x: mouse.x, y: mouse.y });
                gsap.to(els.cursorLight, { duration: 0.5, x: mouse.x, y: mouse.y, ease: 'power2.out' });
            });
        }
        
        function initIntroAnimation() {
          if (!els.introBeginBtn) return;
          gsap.set(els.siteWrapper, { opacity: 0, visibility: 'hidden' });
          gsap.set(els.siteHeader, { y: '-100%', opacity: 0 });

          const tl = gsap.timeline();
          tl.to(els.introLine1, { opacity: 1, duration: 1.5, ease: 'power2.out' })
            .to(els.introLine1, { opacity: 0, duration: 1, ease: 'power2.in' }, '+=1')
            .to(els.introLine2, { opacity: 1, duration: 1.5, ease: 'power2.out' }, '-=0.5')
            .to(els.introBeginBtn, { opacity: 1, duration: 1.5, ease: 'power2.out' }, '-=1');

          els.introBeginBtn.addEventListener('click', enterSite, { once: true });
        }

        function enterSite() {
          if (isSiteEntered) return;
          isSiteEntered = true;

          const tl = gsap.timeline({
            onComplete: () => {
              els.introOverlay.style.display = 'none';
              els.siteWrapper.style.visibility = 'visible';
              document.body.classList.add('site-entered');
              
              initSmoothScroll();
              initNavigation();
              initAccessibility();
              initHeroFallback();
              initHeroAnimation();
              initChallengeAnimation();
              initSiteAnimations();
              initChatbot();
              initContactForm();
            }
          });

          tl.to([els.introLine2, els.introBeginBtn], { opacity: 0, duration: 0.5, ease: 'power2.in' })
            .to(els.introOverlay, { opacity: 0, duration: 1.5, ease: 'power2.inOut' })
            .to(els.siteWrapper, { opacity: 1, duration: 1.5, ease: 'power2.out' }, '-=1')
            .to(els.siteHeader, { y: '0%', opacity: 1, duration: 1.2, ease: 'power3.out' }, '-=1');
        }

        function initSmoothScroll() {
          if (typeof Lenis === 'undefined' || document.body.classList.contains('reduced-motion')) return;
          lenis = new Lenis();
          gsap.ticker.add((time) => lenis.raf(time * 1000));
        }

        function initNavigation() {
            if (els.siteHeader) {
                ScrollTrigger.create({
                    start: 'top top-=-10px',
                    onUpdate: self => els.siteHeader.classList.toggle('is-scrolled', self.direction === 1 && self.scroll() > 10)
                });
            }

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetEl = document.querySelector(this.getAttribute('href'));
                    if (targetEl) {
                       if (lenis) lenis.scrollTo(targetEl, { offset: -80 });
                       else window.scrollTo({ top: targetEl.getBoundingClientRect().top + window.scrollY - 80, behavior: 'smooth' });
                    }
                });
            });

            gsap.utils.toArray('main section[id]').forEach((section) => {
                ScrollTrigger.create({
                    trigger: section,
                    start: 'top center+=100px',
                    end: 'bottom center-=100px',
                    onToggle: self => {
                        const link = document.querySelector(`.nav-link[href="#${section.id}"]`);
                        if (self.isActive) {
                            document.querySelectorAll('.nav-link.active').forEach(l => l.classList.remove('active'));
                            if (link) link.classList.add('active');
                        }
                    }
                });
            });
            const homeLink = document.querySelector('.nav-link[href="#home"]');
            if (homeLink) homeLink.classList.add('active');


            if (els.mobileNavToggle && els.navLinksContainer) {
                els.mobileNavToggle.addEventListener('click', () => {
                    const isExpanded = els.mobileNavToggle.getAttribute('aria-expanded') === 'true';
                    els.mobileNavToggle.setAttribute('aria-expanded', !isExpanded);
                    els.navLinksContainer.classList.toggle('is-visible');
                    document.body.classList.toggle('nav-open');
                });
                els.navLinksContainer.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                       if (els.navLinksContainer.classList.contains('is-visible')) {
                           els.mobileNavToggle.click();
                       }
                    });
                });
            }
        }

        function initHeroAnimation() {
            if (document.body.classList.contains('reduced-motion') || !els.heroHeadline) return;

            gsap.set(els.heroHeadline, { opacity: 1 });
            
            const tl = gsap.timeline({ delay: 0.5 });
            tl.to(els.heroHeadline, { backgroundPosition: '0% 0', duration: 1.5, ease: 'power2.inOut' })
              .to([els.heroSubheadline], {
                opacity: 1,
                y: 0,
                duration: 1.2,
                ease: 'power2.out'
            }, "-=1");
        }

        function initChallengeAnimation() {
            if (!els.networkCanvas || document.body.classList.contains('reduced-motion')) return;

            const canvas = els.networkCanvas;
            const ctx = canvas.getContext('2d');
            let nodes = [];
            let animationFrameId;

            function resizeCanvas() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                createNodes();
            }

            class Node {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    this.radius = Math.random() * 2 + 1;
                    this.baseColor = 'rgba(148, 163, 184, 0.5)';
                    this.color = this.baseColor;
                    this.isGlitched = false;
                }
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }
            }

            function createNodes() {
                nodes = [];
                const density = window.innerWidth < 768 ? 80 : 60; // Less dense on mobile
                const cols = Math.floor(canvas.width / density);
                const rows = Math.floor(canvas.height / density);

                for (let i = 0; i < cols; i++) {
                    for (let j = 0; j < rows; j++) {
                        const x = i * density + (Math.random()) * density;
                        const y = j * density + (Math.random()) * density;
                        nodes.push(new Node(x, y));
                    }
                }
            }

            function connectNodes() {
                for (let i = 0; i < nodes.length; i++) {
                    for (let j = i + 1; j < nodes.length; j++) {
                        const dx = nodes[i].x - nodes[j].x;
                        const dy = nodes[i].y - nodes[j].y;
                        const dist = Math.sqrt(dx * dx + dy * dy);

                        if (dist < 90) {
                            ctx.beginPath();
                            ctx.moveTo(nodes[i].x, nodes[i].y);
                            ctx.lineTo(nodes[j].x, nodes[j].y);
                            const opacity = 1 - (dist / 90);
                            const color = nodes[i].isGlitched && nodes[j].isGlitched ? `rgba(239, 68, 68, ${opacity * 0.5})` : `rgba(51, 65, 85, ${opacity * 0.5})`;
                            ctx.strokeStyle = color;
                            ctx.lineWidth = 0.5;
                            ctx.stroke();
                        }
                    }
                }
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                nodes.forEach(node => node.draw());
                connectNodes();
                animationFrameId = requestAnimationFrame(animate);
            }
            
            resizeCanvas();
            animate();
            window.addEventListener('resize', resizeCanvas);

            ScrollTrigger.create({
                trigger: '#challenge',
                start: 'top center',
                end: 'bottom center',
                onUpdate: (self) => {
                    const progress = self.progress;
                    nodes.forEach(node => {
                        if (Math.random() < progress * 0.01) {
                            node.isGlitched = true;
                            node.color = `rgba(239, 68, 68, ${Math.random() * 0.5 + 0.5})`;
                        } else if (node.isGlitched && Math.random() > 0.95) {
                             node.isGlitched = false;
                             node.color = node.baseColor;
                        }
                    });
                },
                 onLeaveBack: () => {
                    nodes.forEach(node => {
                        node.isGlitched = false;
                        node.color = node.baseColor;
                    });
                }
            });
        }
        
        function initSiteAnimations() {
            if (document.body.classList.contains('reduced-motion')) return;

            gsap.utils.toArray('.reveal-up').forEach(elem => {
                gsap.fromTo(elem, { opacity: 0, y: 50 }, {
                    opacity: 1, y: 0, duration: 1.2, ease: 'power3.out',
                    scrollTrigger: { trigger: elem, start: 'top 88%', once: true }
                });
            });
          
            if(document.querySelector('.journal-image-container')) {
                gsap.fromTo('.journal-image-container',
                    { clipPath: 'inset(10% 20% 10% 20%)', opacity: 0, scale: 1.1 },
                    { clipPath: 'inset(0% 0% 0% 0%)', opacity: 1, scale: 1, duration: 1.5, ease: 'power4.out',
                    scrollTrigger: { trigger: '.journal-image-container', start: 'top 85%', once: true }
                });
            }

            if (els.userCounter) {
                gsap.to(els.userCounter, {
                    textContent: 100000, duration: 3, ease: "power2.inOut", snap: { textContent: 1 },
                    scrollTrigger: { trigger: els.userCounter, start: "top 80%", once: true },
                    onUpdate: function() { this.targets()[0].innerHTML = Math.ceil(this.targets()[0].textContent).toLocaleString('en-US') + "+"; }
                });
            }
            if (els.platformCounter) {
                gsap.to(els.platformCounter, {
                    textContent: 3, duration: 2.5, ease: "power2.inOut", snap: { textContent: 1 },
                    scrollTrigger: { trigger: els.platformCounter, start: "top 80%", once: true },
                    onUpdate: function() { this.targets()[0].innerHTML = Math.ceil(this.targets()[0].textContent) + "+"; }
                });
            }
        }

        function initChatbot() {
            const botResponses = {
                "greeting": "Hello! How can I assist you today on your journey to digital clarity?",
                "default": "That's an interesting point. While this demo is limited, the full MehfoozBot explores topics like that in detail.",
                "misinformation": "Spotting misinformation involves a few key steps: Check the source's credibility, look for supporting evidence, be wary of emotionally charged language, and check the date.",
                "safety": "Online safety basics include using strong, unique passwords, enabling two-factor authentication, and being cautious about links or attachments.",
                "story": "Mehfooz began from listening to the community in Skardu. We realized the need wasn't just *more* tech, but *understanding* tech. You can read more in the 'Our Story' section.",
                "ulema": "We proudly partner with local Ulema (religious leaders). They serve as trusted community voices, helping bridge traditional wisdom with essential digital literacy skills."
            };

            const promptQuestions = { "How do you work?": "ulema", "What's your story?": "story", "Spotting fake news?": "misinformation", "Staying safe online?": "safety" };
            const modalQuestions = ["How can I spot fake news?", "Is my WhatsApp safe?", "What is misinformation?"];
          
            function getBotResponse(userInput) {
                const lowerInput = userInput.toLowerCase();
                if (promptQuestions[userInput]) return botResponses[promptQuestions[userInput]];
                if (modalQuestions.includes(userInput)) {
                    if (lowerInput.includes('fake news') || lowerInput.includes('misinformation')) return botResponses.misinformation;
                    if (lowerInput.includes('whatsapp') || lowerInput.includes('safe')) return botResponses.safety;
                }
                if (lowerInput.includes('fake') || lowerInput.includes('misinformation')) return botResponses.misinformation;
                if (lowerInput.includes('safe') || lowerInput.includes('security')) return botResponses.safety;
                if (lowerInput.includes('story') || lowerInput.includes('about')) return botResponses.story;
                if (lowerInput.includes('ulema') || lowerInput.includes('work')) return botResponses.ulema;
                if (lowerInput.includes('hello') || lowerInput.includes('hi')) return botResponses.greeting;
                return botResponses.default;
            }

            function addChatMessage(message, sender, targetLog) {
                if (!targetLog) return;
                const bubble = document.createElement('div');
                bubble.className = `chat-bubble ${sender}-bubble`;
                bubble.textContent = message;
                targetLog.appendChild(bubble);

                if (typeof gsap !== 'undefined' && !document.body.classList.contains('reduced-motion')) {
                    gsap.from(bubble, { opacity: 0, y: 20, duration: 0.5 });
                    gsap.to(targetLog, { duration: 0.5, scrollTo: { y: "max" }, ease: "power2.out" });
                } else {
                    targetLog.scrollTop = targetLog.scrollHeight;
                }
            }
          
            function handleBotUserInput(input, targetLog, targetInput, targetPrompts) {
                const trimmedInput = input.trim();
                if (!trimmedInput) return;
            
                addChatMessage(trimmedInput, 'user', targetLog);
                targetInput.value = "";
                targetInput.disabled = true;
                if (targetPrompts) {
                    targetPrompts.style.pointerEvents = 'none';
                    gsap.to(targetPrompts.children, { opacity: 0.5, duration: 0.3 });
                }
            
                setTimeout(() => {
                    addChatMessage(getBotResponse(trimmedInput), 'bot', targetLog);
                    targetInput.disabled = false;
                    targetInput.focus();
                    if (targetPrompts) {
                        targetPrompts.style.pointerEvents = 'auto';
                        gsap.to(targetPrompts.children, { opacity: 1, duration: 0.3 });
                    }
                }, 1200);
            }
          
            if (els.chatForm) {
                els.chatForm.addEventListener('submit', e => {
                    e.preventDefault();
                    handleBotUserInput(els.chatInput.value, els.chatLog, els.chatInput, els.promptButtonsContainer);
                });
            
                Object.keys(promptQuestions).forEach(q => {
                    const btn = document.createElement('button');
                    btn.className = "chat-prompt-btn";
                    btn.textContent = q;
                    btn.onclick = () => handleBotUserInput(q, els.chatLog, els.chatInput, els.promptButtonsContainer);
                    els.promptButtonsContainer.appendChild(btn);
                });
                addChatMessage(botResponses.greeting, 'bot', els.chatLog);
            }
          
            if (els.modalChatForm) {
                els.modalChatForm.addEventListener('submit', e => {
                    e.preventDefault();
                    handleBotUserInput(els.modalChatInput.value, els.modalChatLog, els.modalChatInput, els.modalPillContainer);
                });
            
                els.modalPillContainer.innerHTML = "";
                modalQuestions.forEach(q => {
                    const pill = document.createElement('button');
                    pill.className = 'chat-prompt-btn';
                    pill.textContent = q;
                    pill.onclick = () => handleBotUserInput(q, els.modalChatLog, els.modalChatInput, els.modalPillContainer);
                    els.modalPillContainer.appendChild(pill);
                });
            
                els.openBotBtn?.addEventListener('click', () => {
                    if (els.modalChatLog.children.length === 0) {
                        addChatMessage("Hello! Ask a question or click a topic.", 'bot', els.modalChatLog);
                    }
                    setTimeout(() => els.modalChatInput.focus(), 300); // Focus after transition
                });
            }
        }

        function initContactForm() {
            if (!els.contactForm) return;
            els.contactForm.addEventListener('submit', e => {
                e.preventDefault();
                if (document.body.classList.contains('reduced-motion')) {
                    els.contactForm.style.display = 'none';
                    els.formSuccess.classList.remove('hidden');
                } else {
                    gsap.to(els.contactForm, {
                        opacity: 0, duration: 0.5, height: 0, ease: 'power2.in',
                        onComplete: () => {
                            els.contactForm.style.display = 'none';
                            els.formSuccess.classList.remove('hidden');
                            gsap.from(els.formSuccess, { opacity: 0, y: 20, duration: 0.6, ease: 'power2.out' });
                        }
                    });
                }
            });
        }
        
        function toggleModal(modal, forceOpen) {
          if (!modal || !els.modalBackdrop) return;
          const show = forceOpen === undefined ? !modal.classList.contains('is-visible') : forceOpen;
          if (show) {
            modal.removeAttribute('hidden');
            els.modalBackdrop.removeAttribute('hidden');
            gsap.to([modal, els.modalBackdrop], { opacity: 1, duration: 0.3, onStart: () => {
                modal.classList.add('is-visible');
                els.modalBackdrop.classList.add('is-visible');
            }});
            gsap.fromTo(modal, {scale: 0.95}, { scale: 1, duration: 0.3, ease: 'back.out(1.7)' });
          } else {
            gsap.to(modal, { scale: 0.95, opacity: 0, duration: 0.3, onComplete: () => {
                modal.classList.remove('is-visible');
                modal.setAttribute('hidden', 'true');
            }});
            gsap.to(els.modalBackdrop, { opacity: 0, duration: 0.3, onComplete: () => {
                els.modalBackdrop.classList.remove('is-visible');
                els.modalBackdrop.setAttribute('hidden', 'true');
            }});
          }
        }

        function toggleHelp(forceOpen) {
          if (!els.keyboardHelp) return;
          const show = forceOpen === undefined ? !els.keyboardHelp.classList.contains('is-visible') : forceOpen;
          els.helpToggleBtn?.setAttribute('aria-expanded', show);
          if (show) {
             els.keyboardHelp.removeAttribute('hidden');
             gsap.fromTo(els.keyboardHelp, {opacity: 0, scale: 0.95}, { opacity: 1, scale: 1, duration: 0.3, ease: 'back.out(1.7)', onStart: () => els.keyboardHelp.classList.add('is-visible') });
          } else {
             gsap.to(els.keyboardHelp, { opacity: 0, scale: 0.95, duration: 0.3, onComplete: () => {
                els.keyboardHelp.classList.remove('is-visible');
                els.keyboardHelp.setAttribute('hidden', 'true');
             }});
          }
        }
        
        function initAccessibility() {
          if (els.settingsToggleBtn) els.settingsToggleBtn.addEventListener('click', () => toggleModal(els.settingsModal, true));
          if (els.settingsCloseBtn) els.settingsCloseBtn.addEventListener('click', () => toggleModal(els.settingsModal, false));
          if(els.helpToggleBtn) els.helpToggleBtn.addEventListener('click', () => toggleHelp());
          if(els.openBotBtn) els.openBotBtn.addEventListener('click', () => toggleModal(els.botModal, true));
          if(els.closeBotBtn) els.closeBotBtn.addEventListener('click', () => toggleModal(els.botModal, false));
          if (els.modalBackdrop) els.modalBackdrop.addEventListener('click', () => {
            toggleModal(els.settingsModal, false);
            toggleModal(els.botModal, false);
          });

          window.addEventListener('keydown', (e) => {
            if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') return;
            if (e.key === 'Escape') {
              toggleModal(els.settingsModal, false);
              toggleModal(els.botModal, false);
              toggleHelp(false);
            }
            if (e.key === '?') { e.preventDefault(); toggleHelp(); }
            if (e.key.toLowerCase() === 'h') { e.preventDefault(); document.querySelector('a[href="#home"]').click(); }
            if (e.key.toLowerCase() === 'm') { e.preventDefault(); toggleModal(els.botModal, true); }
          });
        }
        
        function initHeroFallback() {
          if (!els.motionToggle) return;
          const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
          const isMobile = window.innerWidth < 768;
          let motionEnabled = !prefersReducedMotion && !isMobile;
          
          els.motionToggle.checked = motionEnabled;
          setMotion(motionEnabled);

          els.motionToggle.addEventListener('change', (e) => setMotion(e.target.checked));
          window.matchMedia('(prefers-reduced-motion: reduce)').addEventListener('change', e => {
            if (e.matches) {
              setMotion(false);
              els.motionToggle.checked = false;
            }
          });
        }

        function setMotion(enabled) {
          document.body.classList.toggle('reduced-motion', !enabled);
          if (lenis) enabled ? lenis.start() : lenis.stop();
          if(els.heroVideo && els.heroStatic){
              els.heroVideo.style.display = enabled ? 'block' : 'none';
              els.heroStatic.style.display = enabled ? 'none' : 'block';
              if (enabled) els.heroVideo.play().catch(()=>{}); else els.heroVideo.pause();
          }
        }
      });
    </script>

</body>
</html>

